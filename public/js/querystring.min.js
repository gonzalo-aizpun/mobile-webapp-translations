// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

(function(f){var e=f.querystring={};function a(h,i){return Object.prototype.hasOwnProperty.call(h,i)}e.parse=function(s,u,h,r){u=u||"&";h=h||"=";var q={};if(typeof s!=="string"||s.length===0){return q}var t=/\+/g;s=s.split(u);var p=1000;if(r&&typeof r.maxKeys==="number"){p=r.maxKeys}var o=s.length;if(p>0&&o>p){o=p}for(var j=0;j<o;++j){var z=s[j].replace(t,"%20"),l=z.indexOf(h),n,y,m,w;if(l>=0){n=z.substr(0,l);y=z.substr(l+1)}else{n=z;y=""}m=decodeURIComponent(n);w=decodeURIComponent(y);if(!a(q,m)){q[m]=w}else{if(b(q[m])){q[m].push(w)}else{q[m]=[q[m],w]}}}return q};var b=Array.isArray||function(h){return Object.prototype.toString.call(h)==="[object Array]"};var g=function(h){switch(typeof h){case"string":return h;case"boolean":return h?"true":"false";case"number":return isFinite(h)?h:"";default:return""}};e.stringify=function(j,k,h,i){k=k||"&";h=h||"=";if(j===null){j=undefined}if(typeof j==="object"){return c(d(j),function(l){var m=encodeURIComponent(g(l))+h;if(b(j[l])){return j[l].map(function(n){return m+encodeURIComponent(g(n))}).join(k)}else{return m+encodeURIComponent(g(j[l]))}}).join(k)}if(!i){return""}return encodeURIComponent(g(i))+h+encodeURIComponent(g(j))};var b=Array.isArray||function(h){return Object.prototype.toString.call(h)==="[object Array]"};function c(l,h){if(l.map){return l.map(h)}var k=[];for(var j=0;j<l.length;j++){k.push(h(l[j],j))}return k}var d=Object.keys||function(i){var j=[];for(var h in i){if(Object.prototype.hasOwnProperty.call(i,h)){j.push(h)}}return j}})(window);